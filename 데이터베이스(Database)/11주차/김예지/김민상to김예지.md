## 📌 CS 스터디 피드백 (2025-04-23)

### 1. 답변하지 못한 질문 📝

#### ✅ B tree는 삭제,삽입,수정 시 시간복잡도가 어떻게 되나요?

- 탐색 뿐 아니라 모든 작업은 평균,최악 모두 O(logn)입니다.
- [참고자료](https://www.youtube.com/watch?v=liPSnc6Wzfk&t=1294s&ab_channel=%EC%89%AC%EC%9A%B4%EC%BD%94%EB%93%9C)

#### ✅ 쿼리 반환행이 정말 많을때, 대충 테이블의 절반이상의 행을 반환해야 하는 쿼리가 들어왔을 때, 이때도 테이블 풀스캔보다 인덱스 레인지 스캔이 더 좋을까요?(판단할까요?)

- 성능 직접 비교해봐야 된다는 것은 틀린 대답은 아닌것 같습니다.
- 다만, 저가 원했던 답은 순차 I/O와 랜덤 I/O를 언급하며, 인덱스 테이블에서는 각 노드를 방문할때마다 랜덤 I/O가 발생해, 오히려 테이블풀스캔보다 인덱스레인지스캔이 성능적으로 더 낮아질수 있습니다.
- 따라서, 옵티마이저는 비용기반으로 순차I/O로 진행되는 테이블풀스캔을 선택할 수 있다. 이런식으로 대답해도 좋은 답변 일 것 같습니다.


#### ✅ like 절 문자열 앞 %가 붙여져 있을때, 옵티마이저는 어떤 방식으로 스캔을 할까요?

- 풀테이블스캔이나 풀인덱스스캔으로 판단합니다.
- like절이 왜 옵티마이저가 인덱스 풀 스캔으로 판단하냐면, B-Tree는 왼쪽부터(접두어 기준) 순차적으로 값을 비교하는 방식으로 검색합니다.
- '%김철수'와 같이 앞에 와일드카드가 오면 검색의 시작점을 특정할 수 없습니다. 따라서 인덱스를 효과적으로 사용할 수 없습니다.
- 그리고 옵티마이저는 인덱스 스캔 후 테이블 랜덤 액세스(I/O)하는 비용이 테이블을 직접 순차적으로 읽는 것보다 더 크다고 판단하는 경우 테이블 풀 스캔을 선택합니다.

#### ✅ LIKE절 앞에 %일땐 어떻게 해야 검색 성능을 높일 수 있을까요?

- mysql의 full text를 사용하거나, Elasticsearch와 같은 기술을 언급하시면 좋을 것 같습니다. 
- 더불어 이 둘의 내부구현은 역인덱스구조로 이루어져있어서 한번 찾아보시면 좋을것 같습니다.

#### ✅ 뷰 사용 시 유념해야하거나 주의할 점은 뭘까요?

- 일반적으로 뷰는 실제로 데이터베이스에서 데이터를 특정 시점에 저장하는 것이 아니라, 쿼리를 정의해두고 뷰를 호출할 때마다 해당 쿼리를 실행하여 최신 데이터를 가져옵니다. 그래서 가상의 테이블로 불리고 있습니다.
- 주의할 점은 1. 인덱싱이 불가능합니다(물리적으로 저장되는 데이터가 아니기 때문) 2. 테이블 열 이름 변경, 테이블 구조 변경 시 관련 뷰를 모두 업데이트해야 합니다. 


### 2. 좋았던 점 ✨

- 전반적으로 답변을 잘하셨고, 태도도 전반적으로 좋았습니다.
- 특히 모르는 개념인 full text도 모른다고 언급하시고, 이름을 유추해서 답변 하시는 모습이 매우 인상적이었습니다.


### 3. 보완하면 좋을 점 💡

- 저번 말씀대로 쿼리튜닝 경험이 있었으면 좀 더 수월하고 자신있게 대답할 수 있었을 것 같습니다. 
- 작은 프로젝트로 약 천만건의 데이터를 넣고 쿼리를 발생시키고 실행계획을 보면서 개선해나가는 것도 좋은 학습방법일 것 같습니다.

